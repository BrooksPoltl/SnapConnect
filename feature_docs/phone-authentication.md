### Phone Authentication Feature Plan

| Priority   | Task Description                               | Implementation Details                                                                                                                                                                                                                                                                                                     | Code Pointers                                                      | Dependencies                              | Status      |
| :--------- | :--------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :----------------------------------------------------------------- | :---------------------------------------- | :---------- |
| **High**   | **Backend: Configure Supabase Auth**           | Enable Phone Authentication in the Supabase dashboard. Configure the SMS provider (e.g., Twilio) with the necessary credentials. This is a manual step in the Supabase project settings. Note that SMS providers like Twilio are paid services.                                                                            | `Supabase Dashboard` -> `Authentication` -> `Providers` -> `Phone` | None                                      | Not Started |
| **High**   | **Frontend: Update `PhoneAuthScreen` UI**      | Replace the "Coming Soon" placeholder with a `TextInput` for the phone number and a button to trigger the sign-in process. We will need to manage two states: one for entering the phone number and another for verifying the OTP. We can use `react-native-phone-number-input` for a user-friendly country code selector. | `src/screens/PhoneAuthScreen/index.tsx`                            | `react-native-phone-number-input` package | Not Started |
| **High**   | **Frontend: Implement Phone Sign-in Logic**    | Create a `signInWithPhone` function in the auth service. This function will call `supabase.auth.signInWithOtp` with the user's phone number. It should handle both sending the initial OTP and verifying it.                                                                                                               | `src/services/auth.ts`                                             | Backend Config                            | Not Started |
| **Medium** | **Frontend: Implement OTP Verification Logic** | Add a `verifyPhoneOtp` function to the auth service. This will take the phone number and OTP code and call `supabase.auth.verifyOtp`. On success, the user will be logged in.                                                                                                                                              | `src/services/auth.ts`                                             | `signInWithPhone`                         | Not Started |
| **Medium** | **Frontend: Handle New User Onboarding**       | After a new user successfully verifies their phone number, check if they have a profile. If not, navigate them to a "Create Profile" screen to enter their username and full name.                                                                                                                                         | `src/navigation/AuthStack.tsx`, `PhoneAuthScreen`                  | OTP Verification                          | Not Started |
| **Low**    | **Frontend: Refactor Email Dependencies**      | Update the `ConversationScreen` to use a more generic fallback than `user.email`. Adjust the `getUserProfile` service to gracefully handle users without an email.                                                                                                                                                         | `src/screens/ConversationScreen/index.tsx`, `src/services/user.ts` | None                                      | Not Started |
| **Low**    | **Frontend: Add Error Handling**               | Implement user-friendly error alerts for common issues like invalid phone numbers, incorrect OTPs, or network errors, using the application's standard error display method.                                                                                                                                               | `src/screens/PhoneAuthScreen/index.tsx`                            | Sign-in/OTP Logic                         | Not Started |
